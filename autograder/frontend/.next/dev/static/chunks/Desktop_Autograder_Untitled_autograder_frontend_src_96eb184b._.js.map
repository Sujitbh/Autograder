{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/reeyadangol/Desktop/Autograder/Untitled/autograder/frontend/src/utils/ThemeContext.tsx"],"sourcesContent":["'use client';\n\nimport { createContext, useContext, useState, useEffect, useCallback, ReactNode } from 'react';\n\n// ── Types ───────────────────────────────────────────────────────────\n\nexport type ThemeMode = 'light' | 'dark' | 'system';\n\ninterface ThemeContextType {\n    /** Raw preference ('light' | 'dark' | 'system'). */\n    theme: ThemeMode;\n    /** Resolved boolean — true when actual appearance is dark. */\n    isDark: boolean;\n    /** Set an explicit mode. */\n    setTheme: (mode: ThemeMode) => void;\n    /** Toggle between light ↔ dark (resets 'system' to explicit). */\n    toggleTheme: () => void;\n}\n\nconst ThemeContext = createContext<ThemeContextType>({\n    theme: 'light',\n    isDark: false,\n    setTheme: () => { },\n    toggleTheme: () => { },\n});\n\n// ── Provider ────────────────────────────────────────────────────────\n\nexport function ThemeProvider({ children }: { children: ReactNode }) {\n    const [theme, setThemeState] = useState<ThemeMode>(() => {\n        if (typeof window === 'undefined') return 'light';\n        const stored = localStorage.getItem('autograde_theme') as ThemeMode | null;\n        return stored ?? 'light';\n    });\n\n    const [systemDark, setSystemDark] = useState(() => {\n        if (typeof window === 'undefined') return false;\n        return window.matchMedia('(prefers-color-scheme: dark)').matches;\n    });\n\n    // Listen for OS-level theme changes\n    useEffect(() => {\n        const mq = window.matchMedia('(prefers-color-scheme: dark)');\n        const handler = (e: MediaQueryListEvent) => setSystemDark(e.matches);\n        mq.addEventListener('change', handler);\n        return () => mq.removeEventListener('change', handler);\n    }, []);\n\n    const isDark = theme === 'dark' || (theme === 'system' && systemDark);\n\n    // Apply class + persist whenever the resolved value changes\n    useEffect(() => {\n        const root = document.documentElement;\n        root.classList.toggle('dark', isDark);\n        root.style.setProperty('color-scheme', isDark ? 'dark' : 'light');\n    }, [isDark]);\n\n    const setTheme = useCallback((mode: ThemeMode) => {\n        setThemeState(mode);\n        localStorage.setItem('autograde_theme', mode);\n    }, []);\n\n    const toggleTheme = useCallback(() => {\n        setTheme(isDark ? 'light' : 'dark');\n    }, [isDark, setTheme]);\n\n    return (\n        <ThemeContext.Provider value={{ theme, isDark, setTheme, toggleTheme }}>\n            {children}\n        </ThemeContext.Provider>\n    );\n}\n\n// ── Hook ────────────────────────────────────────────────────────────\n\nexport const useTheme = () => useContext(ThemeContext);\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAmBA,MAAM,6BAAe,IAAA,6OAAa,EAAmB;IACjD,OAAO;IACP,QAAQ;IACR,UAAU,KAAQ;IAClB,aAAa,KAAQ;AACzB;AAIO,SAAS,cAAc,EAAE,QAAQ,EAA2B;;IAC/D,MAAM,CAAC,OAAO,cAAc,GAAG,IAAA,wOAAQ;kCAAY;YAC/C;;YACA,MAAM,SAAS,aAAa,OAAO,CAAC;YACpC,OAAO,UAAU;QACrB;;IAEA,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,wOAAQ;kCAAC;YACzC;;YACA,OAAO,OAAO,UAAU,CAAC,gCAAgC,OAAO;QACpE;;IAEA,oCAAoC;IACpC,IAAA,yOAAS;mCAAC;YACN,MAAM,KAAK,OAAO,UAAU,CAAC;YAC7B,MAAM;mDAAU,CAAC,IAA2B,cAAc,EAAE,OAAO;;YACnE,GAAG,gBAAgB,CAAC,UAAU;YAC9B;2CAAO,IAAM,GAAG,mBAAmB,CAAC,UAAU;;QAClD;kCAAG,EAAE;IAEL,MAAM,SAAS,UAAU,UAAW,UAAU,YAAY;IAE1D,4DAA4D;IAC5D,IAAA,yOAAS;mCAAC;YACN,MAAM,OAAO,SAAS,eAAe;YACrC,KAAK,SAAS,CAAC,MAAM,CAAC,QAAQ;YAC9B,KAAK,KAAK,CAAC,WAAW,CAAC,gBAAgB,SAAS,SAAS;QAC7D;kCAAG;QAAC;KAAO;IAEX,MAAM,WAAW,IAAA,2OAAW;+CAAC,CAAC;YAC1B,cAAc;YACd,aAAa,OAAO,CAAC,mBAAmB;QAC5C;8CAAG,EAAE;IAEL,MAAM,cAAc,IAAA,2OAAW;kDAAC;YAC5B,SAAS,SAAS,UAAU;QAChC;iDAAG;QAAC;QAAQ;KAAS;IAErB,qBACI,4PAAC,aAAa,QAAQ;QAAC,OAAO;YAAE;YAAO;YAAQ;YAAU;QAAY;kBAChE;;;;;;AAGb;GA3CgB;KAAA;AA+CT,MAAM,WAAW;;IAAM,OAAA,IAAA,0OAAU,EAAC;AAAY;IAAxC"}},
    {"offset": {"line": 107, "column": 0}, "map": {"version":3,"sources":["file:///Users/reeyadangol/Desktop/Autograder/Untitled/autograder/frontend/src/utils/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport {\n    createContext,\n    useContext,\n    useState,\n    useCallback,\n    useEffect,\n    type ReactNode,\n} from 'react';\nimport type { User, UserRole, Faculty, Student, RegisterData } from '@/types';\n\n// ── Context shape ───────────────────────────────────────────────────\n\ninterface AuthContextType {\n    /** Currently authenticated user (null when logged out). */\n    user: User | null;\n    /** Shorthand role accessor. */\n    role: UserRole | null;\n    /** Whether the user is logged in. */\n    isAuthenticated: boolean;\n    /** True while restoring the session on mount. */\n    isLoading: boolean;\n    /** Sign in — stores user in state + localStorage. */\n    login: (userData?: Partial<User>) => void;\n    /** Register → same as login for simplicity. */\n    signup: (userData?: Partial<User>) => void;\n    /** Log out — clears everything. */\n    logout: () => void;\n    /** Replace the stored user (e.g. after profile edit). */\n    updateUser: (patch: Partial<User>) => void;\n}\n\nconst AuthContext = createContext<AuthContextType>({\n    user: null,\n    role: null,\n    isAuthenticated: false,\n    isLoading: true,\n    login: () => { },\n    signup: () => { },\n    logout: () => { },\n    updateUser: () => { },\n});\n\n// ── Helper: build a default Faculty user from a partial ─────────────\n\nfunction buildDefaultFaculty(partial?: Partial<User>): Faculty {\n    return {\n        id: partial?.id ?? 'faculty-1',\n        firstName: (partial as Faculty)?.firstName ?? 'Sarah',\n        lastName: (partial as Faculty)?.lastName ?? 'Johnson',\n        email: (partial as Faculty)?.email ?? 'sjohnson@ulm.edu',\n        title: (partial as Faculty)?.title ?? 'Associate Professor',\n        department: (partial as Faculty)?.department ?? 'Computer Science',\n        profilePhoto: partial?.profilePhoto,\n        role: 'faculty',\n    };\n}\n\n// ── Provider ────────────────────────────────────────────────────────\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const [user, setUser] = useState<User | null>(null);\n    const [isLoading, setIsLoading] = useState(true);\n\n    // Restore session from localStorage on mount\n    useEffect(() => {\n        try {\n            const stored = localStorage.getItem('autograde_current_user');\n            const auth = localStorage.getItem('autograde_auth');\n            if (stored && auth === 'true') {\n                setUser(JSON.parse(stored));\n            }\n        } catch {\n            // corrupt data — ignore\n        } finally {\n            setIsLoading(false);\n        }\n    }, []);\n\n    const persistUser = useCallback((u: User) => {\n        setUser(u);\n        localStorage.setItem('autograde_current_user', JSON.stringify(u));\n        localStorage.setItem('autograde_auth', 'true');\n    }, []);\n\n    const login = useCallback(\n        (userData?: Partial<User>) => {\n            const u = buildDefaultFaculty(userData);\n            persistUser(u);\n        },\n        [persistUser]\n    );\n\n    const signup = useCallback(\n        (userData?: Partial<User>) => {\n            const u = buildDefaultFaculty(userData);\n            persistUser(u);\n        },\n        [persistUser]\n    );\n\n    const logout = useCallback(() => {\n        setUser(null);\n        localStorage.removeItem('autograde_current_user');\n        localStorage.removeItem('autograde_auth');\n        localStorage.removeItem('autograde_token');\n    }, []);\n\n    const updateUser = useCallback(\n        (patch: Partial<User>) => {\n            setUser((prev) => {\n                if (!prev) return prev;\n                const updated = { ...prev, ...patch } as User;\n                localStorage.setItem(\n                    'autograde_current_user',\n                    JSON.stringify(updated)\n                );\n                return updated;\n            });\n        },\n        []\n    );\n\n    return (\n        <AuthContext.Provider\n            value={{\n                user,\n                role: user?.role ?? null,\n                isAuthenticated: !!user,\n                isLoading,\n                login,\n                signup,\n                logout,\n                updateUser,\n            }}\n        >\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\n// ── Hook ────────────────────────────────────────────────────────────\n\nexport function useAuth() {\n    return useContext(AuthContext);\n}\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAiCA,MAAM,4BAAc,IAAA,6OAAa,EAAkB;IAC/C,MAAM;IACN,MAAM;IACN,iBAAiB;IACjB,WAAW;IACX,OAAO,KAAQ;IACf,QAAQ,KAAQ;IAChB,QAAQ,KAAQ;IAChB,YAAY,KAAQ;AACxB;AAEA,uEAAuE;AAEvE,SAAS,oBAAoB,OAAuB;IAChD,OAAO;QACH,IAAI,SAAS,MAAM;QACnB,WAAW,AAAC,SAAqB,aAAa;QAC9C,UAAU,AAAC,SAAqB,YAAY;QAC5C,OAAO,AAAC,SAAqB,SAAS;QACtC,OAAO,AAAC,SAAqB,SAAS;QACtC,YAAY,AAAC,SAAqB,cAAc;QAChD,cAAc,SAAS;QACvB,MAAM;IACV;AACJ;AAIO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wOAAQ,EAAc;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wOAAQ,EAAC;IAE3C,6CAA6C;IAC7C,IAAA,yOAAS;kCAAC;YACN,IAAI;gBACA,MAAM,SAAS,aAAa,OAAO,CAAC;gBACpC,MAAM,OAAO,aAAa,OAAO,CAAC;gBAClC,IAAI,UAAU,SAAS,QAAQ;oBAC3B,QAAQ,KAAK,KAAK,CAAC;gBACvB;YACJ,EAAE,OAAM;YACJ,wBAAwB;YAC5B,SAAU;gBACN,aAAa;YACjB;QACJ;iCAAG,EAAE;IAEL,MAAM,cAAc,IAAA,2OAAW;iDAAC,CAAC;YAC7B,QAAQ;YACR,aAAa,OAAO,CAAC,0BAA0B,KAAK,SAAS,CAAC;YAC9D,aAAa,OAAO,CAAC,kBAAkB;QAC3C;gDAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,2OAAW;2CACrB,CAAC;YACG,MAAM,IAAI,oBAAoB;YAC9B,YAAY;QAChB;0CACA;QAAC;KAAY;IAGjB,MAAM,SAAS,IAAA,2OAAW;4CACtB,CAAC;YACG,MAAM,IAAI,oBAAoB;YAC9B,YAAY;QAChB;2CACA;QAAC;KAAY;IAGjB,MAAM,SAAS,IAAA,2OAAW;4CAAC;YACvB,QAAQ;YACR,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;QAC5B;2CAAG,EAAE;IAEL,MAAM,aAAa,IAAA,2OAAW;gDAC1B,CAAC;YACG;wDAAQ,CAAC;oBACL,IAAI,CAAC,MAAM,OAAO;oBAClB,MAAM,UAAU;wBAAE,GAAG,IAAI;wBAAE,GAAG,KAAK;oBAAC;oBACpC,aAAa,OAAO,CAChB,0BACA,KAAK,SAAS,CAAC;oBAEnB,OAAO;gBACX;;QACJ;+CACA,EAAE;IAGN,qBACI,4PAAC,YAAY,QAAQ;QACjB,OAAO;YACH;YACA,MAAM,MAAM,QAAQ;YACpB,iBAAiB,CAAC,CAAC;YACnB;YACA;YACA;YACA;YACA;QACJ;kBAEC;;;;;;AAGb;GA/EgB;KAAA;AAmFT,SAAS;;IACZ,OAAO,IAAA,0OAAU,EAAC;AACtB;IAFgB"}},
    {"offset": {"line": 242, "column": 0}, "map": {"version":3,"sources":["file:///Users/reeyadangol/Desktop/Autograder/Untitled/autograder/frontend/src/app/providers.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ThemeProvider } from '../utils/ThemeContext';\nimport { AuthProvider } from '../utils/AuthContext';\n\nfunction makeQueryClient() {\n    return new QueryClient({\n        defaultOptions: {\n            queries: {\n                staleTime: 5 * 60 * 1000,      // 5 minutes\n                gcTime: 30 * 60 * 1000,         // 30 minutes\n                retry: 3,\n                retryDelay: (attempt) => Math.min(1000 * 2 ** attempt, 10_000),\n                refetchOnWindowFocus: true,\n            },\n            mutations: {\n                retry: 1,\n            },\n        },\n    });\n}\n\nexport function Providers({ children }: { children: React.ReactNode }) {\n    const [queryClient] = useState(makeQueryClient);\n\n    return (\n        <QueryClientProvider client={queryClient}>\n            <ThemeProvider>\n                <AuthProvider>{children}</AuthProvider>\n            </ThemeProvider>\n        </QueryClientProvider>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;;;AALA;;;;;AAOA,SAAS;IACL,OAAO,IAAI,8PAAW,CAAC;QACnB,gBAAgB;YACZ,SAAS;gBACL,WAAW,IAAI,KAAK;gBACpB,QAAQ,KAAK,KAAK;gBAClB,OAAO;gBACP,YAAY,CAAC,UAAY,KAAK,GAAG,CAAC,OAAO,KAAK,SAAS;gBACvD,sBAAsB;YAC1B;YACA,WAAW;gBACP,OAAO;YACX;QACJ;IACJ;AACJ;AAEO,SAAS,UAAU,EAAE,QAAQ,EAAiC;;IACjE,MAAM,CAAC,YAAY,GAAG,IAAA,wOAAQ,EAAC;IAE/B,qBACI,4PAAC,+QAAmB;QAAC,QAAQ;kBACzB,cAAA,4PAAC,gNAAa;sBACV,cAAA,4PAAC,8MAAY;0BAAE;;;;;;;;;;;;;;;;AAI/B;GAVgB;KAAA"}}]
}